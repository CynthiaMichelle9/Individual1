{% extends "base.html" %}
{% load static %}

{% block title %} Lista de Tareas {% endblock %}

{% block contenido %}
<div class="container">
  <div class="justify-content-center">
      <div class="card">
        <div class="card-header">
          <div class="d-flex justify-content-between align-items-center">
            <h4 class="titulo ">{{ tarea.titulo }}</h4>
            <a id="add-link" href="{% url 'tareas' %}" class="btn btn-atras">Atrás</a>
          </div>
        </div>
        <div class="card-body">
          <dl class="row">
            <dt class="col-sm-3">Descripción:</dt>
            <dd class="col-sm-9">{{ tarea.descripcion }}</dd>

            <dt class="col-sm-3">Fecha de Vencimiento:</dt>
            <dd class="col-sm-9">{{ tarea.fecha_vencimiento }}</dd>

            <dt class="col-sm-3">Estado de Tarea:</dt>
            <dd class="col-sm-9">{{ tarea.estado_tarea }}</dd>

            <dt class="col-sm-3">Etiqueta de Tarea:</dt>
            <dd class="col-sm-9">{{ tarea.etiqueta_tarea }}</dd>

            <dt class="col-sm-3">Prioridad:</dt>
              <dd class="col-sm-9 {% if tarea.prioridad.nombre == 'Baja' %}prioridad-baja{% elif tarea.prioridad.nombre == 'Media' %}prioridad-media{% elif tarea.prioridad.nombre == 'Alta' %}prioridad-alta{% elif tarea.prioridad.nombre == 'Urgente' %}prioridad-urgente{% endif %}">
                
                  {{ tarea.prioridad.nombre }}

              </dd>

            </dd>
            <dt class="col-sm-3">Observaciones Anteriores:</dt>
            <dd class="col-sm-9">
              <form method="post">
                {% csrf_token %}
                {{ observaciones_form.as_p }}
                <button type="submit" class="btn ov-btn-grow-spin">Guardar</button>
              </form>
            </dd>
            <dd class="col-sm-9">
              <div class="d-flex justify-content-start">
                <a href="{% url 'editar-tarea' pk=tarea.pk %}" class="btn btn-secondary" style="margin-right: 10px;">Editar</a>
                <a href="{% url 'eliminar-tarea' pk=tarea.pk %}" class="btn btn-danger" style="margin-right: 10px;">Eliminar</a>
                {% if tarea.estado_tarea != 'Completado' %}
                  <form method="POST" action="{% url 'completar-tarea' tarea.idtarea %}">
                    {% csrf_token %}
                    <input type="submit" value="Completar" class="btn btn-success" style="margin-right: 10px;">
                  </form>
                {% endif %}
              </div>
            </dd>
            
            </dd>
          </dl>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
